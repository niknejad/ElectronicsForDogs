%!TEX root = edance.tex
%%%%%%%%%%%%%%%%
%   CHAPTER 8  %
%%%%%%%%%%%%%%%%
\chapter{MOSFET Device Physics}
\label{ch:ch08_mos}
\graphicspath{{./figs_mos/}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   SECTION 8.1                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Chapter Preview}
The naming of the transistor comes from blending two words: \textbf{trans}conductance res\textbf{istor}.  In this chapter we will be studying the MOSFET, and you will see why the transistor gets it name.  A MOSFET, or \textbf{MOS}-\textbf{F}ield-\textbf{E}ffect-\textbf{T}ransistor\index{MOSFET}, is a device constructed from a MOS capacitor by adding two extra diffusion regions.  This is why it is important that we first studied the MOS-C in the previous chapter.

We begin the chapter by discussing the structure of the MOSFET, discussing the different flavors of MOS technology, including \textbf{NMOS} and \textbf{PMOS} devices, and \textbf{CMOS} technology.  The difference between these devices will be discussed in detail.  Then we will examine the current-voltage characteristics of a MOSFET, known as the $I$-$V$ curves.  Similar to a resistor, we can plot current versus voltage for a MOSFET, but given that the device has three terminals, we must plot families of curves.  Once we have an phenomenological understanding of the MOSFET, we derive analytical equations for an ideal "long channel" device.  This will lead us into understanding some important concepts in the MOSFET, such as the current saturation mechanism.  Finally, we end the chapter by discussing the PMOS device, which is completely complementary to the NMOS device.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=.95\columnwidth]{mosfet_layout}
\caption{Cross section (left) and top-level layout of a MOSFET device (right).  In general, the device has four terminals, labeled (G) gate, (B) body, (S) source, and (D) drain.  The layout parameters include the width $W$ and length $L$.}
\label{fig:mosfet_layout}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   SECTION 8.2                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MOSFET Device Layout and Cross Section}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.2.1             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{MOSFET Top View and Layout}
The cross-section and top view of a \textbf{MOSFET}\index{MOSFET} are shown in \emph{Fig.~\ref{fig:mosfet_layout}}.  A MOS transistor is a \textit{four terminal device} that conducts current between two of its terminals under the control of the third terminal, the \textbf{"gate"}\index{MOSFET!gate} (G).  In a MOSFET, the terminals that carry current are known as the \textbf{"drain"}\index{MOSFET!drain} (D) and \textbf{"source"}\index{MOSFET!source} (S), in analogy with liquid flow.  The "source" supplies electrons, and the \textit{electrons flow from the source to the drain}.  Since electrons carry negative charge, the \textit{current flow is from the drain to the source}, which is confusing but standard convention.  The fourth terminal is the \textbf{"body"}\index{MOSFET!body} (B), which establishes a potential reference for the gate terminal.  Often the body and source are shorted together, and this leads to a "source referenced" notion of the gate voltage.  In general, it is the gate-to-body voltage that determines the operating point\index{Operating point} of the MOS-C, and therefore the MOSFET.

A top view of the MOSFET shown in \emph{Fig.~\ref{fig:mosfet_layout}}.  It is important to note that the dimensions $L$ and $W$ are layout dependent, and can be varied by the circuit designer.  These parameters control the size of the channel that forms (from the source to the drain) which allows current to flow when the device is biased in inversion.  The parameter $W$ is the \textbf{device width}\index{MOSFET!device width}.  The larger the width, the more current the transistor can conduct.  The device dimension $L$ is the \textbf{channel length}\index{MOSFET!channel length}. The shorter the channel, the more conductive the channel.

The smallest possible dimension $L_{min}$ is a technology-dependent parameter as manufacturers strive to improve the performance of the device by providing means of fabricating smaller and smaller devices.  Today's transistors are fabricated with channel lengths as small as $7\,nm$ but not all applications need such a small device.  Generally speaking, smaller channel length leads to a smaller required $W$ to get the same current, and therefore an overall smaller device.  This favors high density logic, where millions to billions of transistors are fabricated on a single chip.  In analog circuit applications, requirements are different and much larger devices may be employed.  Today devices as large as $1\,\mu m$ are used in power and automotive applications.  Short channel devices down to $22\,nm$ are routinely used for RF (radio frequency) applications.

Another thing worth mentioning is that MOSFET devices are "planar".  In \emph{Fig.~\ref{fig:mosfet_layout}}, note that $x_j$ is the \textbf{junction depth}\index{MOSFET!junction depth}, and the channel will form at the surface of the device.  While the metal stack-up (see \emph{Fig.~\ref{fig:cmos_photo}}) may be three dimensional, the actual transistors all reside in a thin layer at the surface of the body.  The circuit designers usually only control the 2D layout of the device, as the third dimension (junction depth for instance) is set by technologist to achieve the best performance.  The most important technology parameters, highlighted in \emph{Fig.~\ref{fig:mos_tech}}, include the minimum channel length $L_{min}$, oxide thickness $t_{ox}$, the device body doping $N_A$, and the junction depth $x_j$.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=\columnwidth]{mos_tech}
\caption{Cross section of a MOSFET device. Important technology parameters include the minimum channel length $L_{min}$, the body doping ($N_A$), the oxide thickness ($t_{ox}$), and the junction depth $x_j$.}
\label{fig:mos_tech}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[H]
\centering
\includegraphics[width=.85\columnwidth]{cmos_xsection_photo.png}
\caption{SEM cross-section photo of a CMOS chip. {\small(Used without permission from M. Schienle et al., "A fully electronic DNA sensor with 128 positions and in-pixel A/D conversion," in \emph{IEEE Journal of Solid-State Circuits}, vol. 39, no. 12, pp. 2438-2445, Dec. 2004.)}}
\label{fig:cmos_photo}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.2.2             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{MOSFET Overview}
With a solid understanding of a MOS capacitor, we now introduce the MOS transistor, or MOSFET.  Note that to make a MOSFET, we start with a MOS capacitor and add two diffusion regions adjacent to the gate, shown in \emph{Fig.~\ref{fig:mos_tech}}.  Note the doping of these regions is opposite to the body of the device.  For a $P$-type substrate, we dope the drain and source $N$-type and make contact with the source and drain terminals.  These junctions form reverse biased (under proper biasing conditions) diodes between the source/drain and the body of the transistor.  Unless we "turn on" the device, no current can flow between the source and drain because of the presence of two back-to-back diodes.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=\columnwidth]{mostfetxsect_current} 
\caption{Cross section of an NMOS device with (a) a zero gate voltage is "off" and cannot conduct current, whereas (b) a sufficiently positive gate voltage is applied to turn "on" the device, allowing electrons to flow from the source to the drain.}
\label{fig:mos_current}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
When a sufficiently large gate voltage is applied, the surface of the MOS-C is inverted, creating a channel between the source and drain, allowing current to flow (see \emph{Fig.~\ref{fig:mos_current}}).

It is important to note that the MOSFET is a four terminal device, but in most situations the body terminal is connected to a fixed DC voltage, or shorted to the source.  The reason for this will become clear later but for now you can assume that unless otherwise noted, the body of the device is connected to ground for NMOS devices and connected to the supply (or highest potential) for a PMOS device.  These connections ensure that under normal operating conditions, when the source and drain voltages swing between ground and supply, the diodes remain reverse biased.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.2.3             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{MOSFET Flavors:  PMOS and NMOS}
MOSFETs are also known by other names, namely the \textbf{IGFET}\index{IGFET}, or \textbf{I}nsulated \textbf{G}ate \textbf{F}ield-\textbf{E}ffect \textbf{T}ransistors.  This name is not really in common use, and MOSFET is much more common.  FETs are a general class of devices that include other devices such as \textbf{J}unction-\textbf{FET}s\index{JFET} (J-FET or \textbf{JFET}) and \textbf{M}etal-\textbf{S}emiconductor-\textbf{FET}s, or \textbf{MESFET}\index{MESFET}s.  We will focus on MOSFETs in this book, although the behavior of MOSFETs, JFETs, and MESFETs are all very similar from the high level perspective of design.  In fact, we will show in the next chapter that by employing small-signal models, all devices essentially look the same.

For a given technology, it may be possible to fabricate two complementary devices, shown in \emph{Fig.~\ref{fig:pmos_xsect}}.  For example, in this chapter we'll see that we can fabricate a MOSFET on a $P$-type body (often the substrate), resulting in an NMOS or \textbf{NFET device}\index{MOSFET!N-type}, or on an $N$-type body, resulting in a PMOS or \textbf{PFET device}\index{MOSFET!P-type}.  These devices are complementary in the sense that the currents and voltages are essentially all the negative of each other.  We already saw this with a MOS-C\index{MOS-C!N-type}, where for an $N$-type device a sufficiently positive gate voltage results in inversion, whereas for a $P$-type MOS-C\index{MOS-C!P-type}, a negative gate-to-body voltage is needed. The same is true of MOSFET devices.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[H]
\centering
\includegraphics[width=\columnwidth]{pmos_xsect}
\caption{Cross section of a PMOS device is very similar to an NMOS device, except it is realized by using an $N$-type body doping and $p^+$ doping diffusion regions to define the source and drain.}
\label{fig:pmos_xsect}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=\columnwidth]{cmos_xsect}
\caption{CMOS technology allows one to build both NMOS and PMOS devices in the same technology side-by-side as shown.  NMOS devices are realized directly using the $P$-type substrate as the body whereas the PMOS device requires a "well", a region counter-doped $N$-type to realize the PMOS body.}
\label{fig:cmos_xsect}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[H]
\centering
\includegraphics[width=.6\columnwidth]{mos_symbols}
\caption{Schematic symbols for the NMOS and PMOS devices.}
\label{fig:mos_symbols}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.2.4             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{CMOS Technology}
Finally, we should discuss the term \textbf{"CMOS"}\index{MOSFET!C-type}, which stands for "\textbf{C}omplementary \textbf{MOS}", or a technology capability to fabricate both NMOS and PMOS devices.  CMOS technology is now universal for silicon-based technology.  As shown in \emph{Fig.~\ref{fig:cmos_xsect}}, both devices are fabricated on the same substrate by creating wells (oppositely doped to the body) to house devices.  With a $P$-type substrate shown, the NMOS devices can be fabricated directly in the body, and the PMOS devices are fabricated in so-called $N$-well regions.  These \textbf{well regions}\index{MOSFET!well regions} are counter-doped to make them $N$-type.  Then $P$-type source/drain junctions are added to make the PMOS device.  The wells need to be biased such that at all times the well-to-body diode is reverse biased\index{PN-junction!reverse bias}.  The well bias is established through the body connection.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.2.5             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Circuit Symbols}
In circuit schematics MOSFET symbols are drawn as shown in \emph{Fig.~\ref{fig:mos_symbols}}.  The symbols with the arrows are more common in analog circuit applications, and the symbols with the bubble on the gate for PMOS are more favored in digital applications.  The bubble emphasizes that the PMOS device is the logical "NOT" of the NMOS device. In other words, a low voltage is needed to turn on the PMOS device (with respect to the body), whereas for the NMOS device a high voltage (relative to the body) is needed.

The arrows in the symbol denote the typical direction of current flow (not electron flow).  Since the source and drain are often physically the same, the actual drain/source may be swapped.  The source and drain are really only meaningful when the bias voltages are specified. For an NMOS device, to get current to flow from the drain-to-source, the drain should be at a higher potential than the source.  The opposite is true for the PMOS device.

The body terminal is sometimes omitted from the schematic.  In this situation, it is implicit that the body of all NMOS devices is tied to ground, or the lowest potential, and the body of all PMOS devices is connected to the supply, or highest potential.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   SECTION 8.3                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{NMOSFET Large Signal Models and Regions of Operation}
We begin by looking at the MOSFET as a MOS-C, and note the importance of the gate-to-body voltage.  Next, we will look at the device as a black box in order to understand the drain-source current-voltage behavior.  Later we'll use this insight to derive the analytical equations.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.3.1             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Cut-off\texorpdfstring{$,\;V_{GS}<V_T$}{}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=.75\columnwidth]{mos_cutoff}
\caption{The MOS device biased in cut-off, or a gate bias $V_{GS} < V_T$, cannot conduct any current as the source and drain are isolated by two back-to-back diodes and a depletion region.}
\label{fig:mos_cutoff}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
As shown in \emph{Fig.~\ref{fig:mos_cutoff}}, we can look at the MOSFET as a MOS capacitor with two $n^+$ diffusion regions on each side. When $V_{GB} < V_T$, the device is either in accumulation\index{MOS-C!accumulation} or in depletion\index{MOS-C!depeletion}.  Because there are no (or very few) inversion charges at the surface, there is no path for current to flow from the source to the drain.  No matter how large we make $V_{DS}$ (up to breakdown limits), current does not flow through two back-to-back diodes that are of opposite polarity.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.3.2             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Inversion\texorpdfstring{$,\;V_{GS}>V_T\text{ and }V_{DS}>0$}{}}
On the other hand, if the gate is biased above threshold, the surface is inverted\index{MOS-C!inversion}, or for an NMOS there is an island filled with electrons that extends from the source to the drain.  This inverted region forms a channel of inversion charges (in this case electrons) that connects the drain and source, as shown in \emph{Fig.~\ref{fig:mos_triode}}.  The inversion charges originate from $n^+$ diffusion regions, so this region can form quickly, unlike a MOS-C where the inversion layer was formed thermally.  If a drain-source voltage ($V_{DS}$) is applied, electrons will flow from source to drain.  \textit{Note: Don't forget that electrons flow S $\rightarrow$ D, whereas current flows from D $\rightarrow$ S}.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=\columnwidth]{mos_triode}
\caption{When a sufficiently positive gate voltage is applied, $V_{GS} > V_T$, a channel forms between the drain and source, essentially connecting these regions.  Electrons can be injected into the channel from the source side, and flow to the drain (biased at a higher potential).  Note current flow is in the opposite direction due to electron charge.}
\label{fig:mos_triode}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.3.3             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Observed Behavior: \texorpdfstring{$I_{DS}-V_{GS}$}{Drain Current vs. Gate Voltage}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[tb]
\centering
\begin{tabular}{cc}
\includegraphics[width=.4\columnwidth]{idvgs_sweep} &
\includegraphics[width=.5\columnwidth]{mos_ids_vgs}\\
(a) & (b)\\
\end{tabular}
\caption{The $I_{DS}$ versus $V_{GS}$ characteristics of a MOSFET can be traced out by holding the drain voltage constant and sweeping the gate voltage as shown.}
\label{fig:idvgs_sweep}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
As shown in \emph{Fig.~\ref{fig:idvgs_sweep}(a)}, suppose we connect an NMOS device drain and gate to a positive voltage $V_{DS} > 0\,V$, and sweep the source connected to the gate.  In this experiment, we monitor the drain-to-source current $I_{DS}$.  As shown in the resulting \textbf{drain current-gate voltage curve}\index{MOSFET!$I_D-V_G$ curve}\big(\emph{Fig.~\ref{fig:idvgs_sweep}(b)}\big), the current is initially zero, and the transistor only conducts when the gate-to-source voltage exceeds a threshold.  The body of the transistor and source are both tied to ground, so in this case the gate-to-source voltage is also the gate-to-body voltage.  We know that when we cross the $V_T$(threshold voltage)\index{MOSFET!threshold voltage} of the device, an inversion layer forms and this must be responsible for the current flow.

We find that the current increases rapidly as we cross the threshold, and it reaches a point where it simply increases linearly with applied gate-to-source voltage.  Also, if we zoom in to the region near the threshold, we will observe very small conduction, in a region called \textbf{"sub-threshold region"}\index{MOSFET!sub-threshold region}, where minute current flow is possible.  We will explain this current flow when we study bipolar junction transistors (BJTs) in \emph{Ch.~\ref{ch:ch11_bjt}}. For now, in this chapter we will ignore this region.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\begin{tabular}{cc}
\includegraphics[width=.4\columnwidth]{idvds_sweep} &
\includegraphics[width=.5\columnwidth]{ids_vds}\\
(a) & (b)\\
\end{tabular}
\caption{(a) The $I_{DS}$ versus $V_{DS}$ characteristics of a MOSFET can be traced out by holding the gate voltage constant and sweeping the drain voltage as shown.  (b) A family of curves results from varying the gate voltage in discrete steps.  Note that the device characteristics can be divided into two distinct regions.  In the "Triode Region" the device acts like a non-linear resistor whereas in the "Saturation Region" the current is relatively constant as a function of $V_{DS}$, acting like a current source.}
\label{fig:ids_vds}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.3.4             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Observed Behavior: \texorpdfstring{$I_{DS} - V_{DS}$}{Drain Current vs. Drain Voltage}}
Now suppose that we fix the gate voltage to constant values and sweep the drain-to-source voltage, as shown in \emph{Fig.~\ref{fig:ids_vds}(a)}.  What we observe is a \textbf{family of curves}\index{MOSFET!$I_D-V_D$ family of curves}, with each curve corresponding to a particular value of the gate voltage.  Just as before, if the gate-to-source voltage is below the threshold, then no current flows and we observe the flat line at $0\,A$. For a gate-to-source voltage above threshold, we observe an $I$-$V$ behavior of a non-linear resistor.  For low values of drain-to-source voltage, the device is like a normal resistor. As the voltage is increased, the resistance behaves non-linearly and the rate of increase of current slows as the curve bends over.

Eventually the current stops growing and remains essentially constant, acting like a current source.  The dashed line separates the current into two regions, called the \textbf{"Triode Region"}\index{MOSFET!triode region} and the \textbf{"Saturation Region"}\index{MOSFET!saturation region}.  In the saturation region, the current is saturated at a fixed value and increases very little for variations in the drain-source voltage.  We draw schematic symbols in each region to emphasize the behavior of the device, first as a conductor, then a non-linear conductor, and finally as a current source.  Now it should be clear why a transistor can act as both a source of transconductance or a resistor.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   SECTION 8.4                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Derivation of MOSFET \texorpdfstring{$I-V$}{I-V} Curve}
With an understanding of the channel inversion forming due to the operating point of the MOS-C device, we can now derive the current flow due to the inversion layer.  Our derivations are approximate and simple to aid us in gaining insight into the device, not to build accurate models.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.4.1             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{MOSFET "Linear'' Region}
With reference to \emph{Fig.~\ref{fig:mos_triode}}, let's assume the device is biased in inversion to allow current to flow:
    \begin{equation*}
        V_{GS} > V_{T}
    \end{equation*}
When the drain-to-source voltage is not too large, we observed that the device behaves like an ordinary conductor.  This makes sense if we view the channel as a semiconductor resistor.  Let's calculate the current to verify this.  The current in this channel is given by:
    \begin{equation}
        I_{DS} =  -W\,v_y\,Q_N
        \label{eq:mosfet_ids}
    \end{equation}
where $W$ is the width of the device, $v_y$ is the velocity of charge carriers in the $y$ direction (along the channel), and $Q_N$ is the \textbf{inversion charge density}\index{MOSFET!inversion charge density} (the charge per unit area) at the surface.  

The charge (the free carriers at the surface) is proportional to the voltage applied across the oxide over threshold, or the \textbf{overdrive voltage}\index{MOSFET!overdrive voltage}.  "Overdrive" means a bias voltage applied over threshold:
    \begin{align}
        \Aboxed{ V_{OD} &= V_{GS} - V_T } &\textit{Overdrive voltage for MOSFET}
    \end{align}
Then the charge is:
    \begin{equation}
        Q_N = C_{ox}(V_{GS} - V_{T}) = C_{ox}\,V_{OD}
        \label{eq:mosfet_charge}
    \end{equation}
Substituting \emph{Eq.~\ref{eq:mosfet_charge}} into \emph{Eq.~\ref{eq:mosfet_ids}}, we have:
    \begin{equation}
        {I_{DS}} =  - W{v_y}{C_{ox}}({V_{GS}} - {V_{T}})
    \end{equation}
If we assume that the channel is of uniform density, then only drift current flows.  The \textbf{drift velocity}\index{MOSFET!drift velocity} of carriers is proportional to the electric field along the channel:
    \begin{align}
        \Aboxed{ v_y &= -\mu_n\mathcal{E}_y } &\textit{Channel drift velocity, MOSFET}
    \end{align}
Notice that this electric field is different from the MOS-C vertical electric field, which is in the $x$ direction, with all field lines terminating on charges.  The lateral field is along the channel ($y$ direction), and for a uniform density of charges, is proportional to the drain-to-source voltage:
    \begin{equation}
        \mathcal{E}_y = -\frac{V_{DS}}{L}
        \label{eq:lateral_field}
    \end{equation}\textbf{}
In \emph{Eq.~\ref{eq:lateral_field}} $L$ is the channel length, because the voltage is dropped uniformly across the channel.  Again, this assumption is only valid if the channel is \textit{uniform}.  Making this last substitution completes the derivation of current versus voltage for the MOSFET in the \textbf{linear regime}\index{MOSFET!linear regime}:
    \begin{align}
        \Aboxed{ I_{DS} &= \frac{W}{L}\mu_n\,C_{ox}\,(V_{GS} - V_{T_n})V_{DS} } &\textit{MOSFET drain current, linear regime}
    \end{align}
The linear region is a special section of the triode region, where the drain current is effectively linearly dependent on the drain voltage. Since current is proportional to voltage, we can now define a \textbf{channel conductance}\index{MOSFET!channel conductance}:
    \begin{equation}
        G_{DS} = \frac{I_{DS}}{V_{DS}} = {\mu_n\,C_{ox}\,(V_{GS} - V_{T_n}} \left( \frac{W}{L} \right)
        \label{eq:mosfet_conductance}
    \end{equation}
\emph{Eq.~\ref{eq:mosfet_conductance}} shows that the conductance depends on the carrier mobility\index{Mobility} $\mu_n$, the level of inversion $C_{ox}(V_{GS}-V_T)$, and the device dimensions. For a fixed \textbf{aspect ratio}\index{MOSFET!aspect ratio} $W/L$, we get more current by realizing higher mobility $\mu_n$, higher gate-oxide capacitance $C_{ox}$, and higher bias voltages.  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.4.2             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{MOSFET as a Variable Resistor}
Notice that in the linear region, the current is proportional to the drain-source voltage and the gate-source voltage.  For a \textit{fixed gate-source voltage}, the equivalent resistance is given by the reciprocal of the channel conductance, $1/G_{DS}$.  We define a \textbf{voltage-dependent resistor}\index{MOSFET!as a voltage-dependent resistor}:
    \begin{equation}
        R_{eq} = \frac{V_{DS}}{I_{DS}} = \frac{1}{\mu_n\,C_{ox}(V_{GS} - V_T)} \left( {\frac{L}{W}} \right)
        = R_\Box(V_{GS})\frac{L}{W}
    \end{equation}
This is a variable resistor that is electronically tunable by adjustment of the gate-to-source voltage.  The parameter $R_\Box$ is the sheet resistance\index{Sheet resistance} of the surface of the MOS transistor.  The sheet resistance drops with increasing gate overdrive.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=.85\columnwidth]{mos_current_derive}
\caption{The setup to help derive the MOS current flow.  Note in particular the non-uniform inversion layer from the source side (maximum inversion) to the drain side (less inversion).}
\label{fig:mos_current_derive}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.4.3             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Approximate Derivation of Inversion Charge Variation}
Up to now, we have ignored the fact that the level of inversion should vary from the source to the drain.  To understand why, consider that the channel covers the surface of the device, and any gate voltage charge will be compensated by inversion charge in the channel.  If $V_{DS} \ne 0\,V$, then the channel potential is not uniform. Because the inversion charge depends on the gate-to-channel voltage, we should expect that the inversion charge\index{MOSFET!inversion charge} to be \textit{maximum} on the \textbf{source side} and \textit{lower} on the \textbf{drain side}\index{MOSFET!channel charge}.  This is because $V_{DS} > 0\,V$, as shown in \emph{Fig.~\ref{fig:mos_current_derive}}.

Let's approximate the inversion charge $Q_N(y)$ along the channel, now a function of position along the channel $y$.  With a channel length of $L$, by taking an average of the source/drain values we have:
    \begin{equation} 
        Q_N(y) \approx \frac{Q_N(y = 0) + Q_N(y = L)}{2}
    \end{equation}
At the source side we have:
    \begin{align} 
        \Aboxed{ Q_N(y=0) &= -C_{ox}(V_{GS} - V_T) } &\textit{MOSFET channel charge, source side}
    \end{align}
While at the drain side we have:
    \begin{align} 
        \Aboxed{ Q_N(y=L) &= -C_{ox}(V_{GD} - V_T) } &\textit{MOSFET channel charge, drain side}
    \end{align}
Note that the gate-to-drain voltage is lower due to the higher potential at the drain side.  To see this, note that 
the voltage at the drain is given as the voltage at the source plus the $V_{DS}$:
    \begin{equation}
    	V_D = V_S + V_{DS}
    	\label{eq:v_d}
    \end{equation}
Substituting \emph{Eq.~\ref{eq:v_d}} for $V_D$, we can see why $V_{GD}$ must be lower the $V_{GS}$:
    \begin{align}
    	V_{GD} &= V_{G} - V_{D} = V_{G} - (V_S + V_{DS})\\
    	&= V_{GS} - V_{DS}
    	\label{eq:v_gd}
    \end{align}
This results in less inversion charge at the drain side.  With this approximation, the average value of charge is given by:
    \begin{equation}
        Q_{N_{ave}}(y) \approx - \frac{C_{ox}\,(V_{GS} - V_T) + C_{ox}\,(V_{GD} - V_T)}{2}
        \label{eq:q_ave_gd}
    \end{equation}
Substituting \emph{Eq.~\ref{eq:v_gd}} for $V_{GD}$ into \emph{Eq.~\ref{eq:q_ave_gd}}, we have:
    \begin{equation}
        Q_{N_{ave}}(y) \approx -\frac{C_{ox}(V_{GS} - V_T) + C_{ox}(V_{GS} - V_{DS} - V_T)}{2}
    \end{equation}
Collecting terms, we have two $(V_{GS} - V_T)$ terms, with one in terms of $V_{DS}$:
    \begin{align}
        Q_{N_{ave}}(y) &\approx -\frac{C_{ox}(2\,V_{GS} - 2\,V_T) - C_{ox}V_{DS}}{2}
    \end{align}
Finally, we arrive at an expression for the \textbf{average channel charge}\index{MOSFET!average channel charge}:
    \begin{align}
        \Aboxed{ Q_{N_{ave}}(y) &= -C_{ox}(V_{GS} - V_T - \frac{V_{DS}}{2}) } &\textit{MOSFET average channel charge}
    \end{align}
As expected, the average charge is lower than the source charge, because the drain voltage is higher than the source.  So the vertical electric field is lower on the drain end, resulting in less inversion charge.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.4.4             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Drift Velocity and Drain Current}
Now we use mobility\index{Mobility} to find the drift velocity\index{Drift velocity} by approximating the $y$ direction field as before:
    \begin{equation}
        v_{drift}(y) =  -\mu_n\,\mathcal{E}(y) \approx -\mu_n \left( -\frac{\Delta V}{\Delta y} \right) = \frac{\mu_n\,V_{DS}}{L}
        \label{eq:drift_velocity}
    \end{equation}
This is clearly an approximation valid only under small $V_{DS}$.  Substituting \emph{Eq.~\ref{eq:drift_velocity}} into \emph{Eq.~\ref{eq:mosfet_ids}} for drift current\index{Drift current}, we have:
    \begin{equation}
        I_{DS} = -W\,v\,Q_N \approx W\,\mu \left( \frac{V_{DS}}{L} \right) C_{ox} \left( V_{GS} - V_T - \frac{V_{DS}}{2} \right)
    \end{equation}
Re-writing this into a form that emphasizes the geometric aspect ratio\index{MOSFET!aspect ratio} $W/L$:
    \begin{equation}
        I_{DS} = \left( \frac{W}{L} \right) \mu\,C_{ox} \left( V_{GS} - V_T - \frac{V_{DS}}{2} \right)V_{DS}
    \end{equation}
This leads to a family of inverted parabolas for the current as a function of $V_{DS}$.  These curves describe the channel conductance observed in \emph{Fig.~\ref{fig:ids_vds}}, wherein the current increases linearly, but then bends as we increase $V_{DS}$.

We now understand the origin of the bend, since increasing $V_{DS}$ affects both the horizontal field along the channel (which tends to increase the current), but also results in lower levels of inversion in the channel, which tends to decrease the current.  These two effects essentially cancel out, and the net result is a curve that is bending and flattening out.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.4.5             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Square Law "Exact" Derivation}
It is hard to make claims of "exactness", because the actual equations are very complex.  We are still making many assumptions in the following derivation, but what follows will be less hand-wavy and a bit more precise.  The key insight is that the threshold voltage varies along the channel, because the \textbf{channel potential}\index{MOSFET!channel potential} (call it $V_{ch}(y)$) is not constant from the source to the drain:
    \begin{equation} 
        V_T(y) = V_T(y=0) + V_{ch}(y)
    \end{equation}
The threshold voltage\index{MOSFET!threshold voltage} at the drain end is related to the source end as follows:
    \begin{equation} 
        V_T(y=L) = V_T(y=0) + V_D
        \label{eq:threshold_varies}
    \end{equation} 
The relation in \emph{Eq.~\ref{eq:threshold_varies}} comes from the fact that the higher drain potential requires a correspondingly higher gate voltage to reach the same level of inversion, exactly by the drain voltage.  This means that the inversion charge\index{MOSFET!inversion charge} varies from source to drain:
    \begin{equation} 
        Q_n(y) = C_{ox} \big(V_G - V_T(y)\big)
    \end{equation}
In other words, if we define $V_T$ as the threshold voltage at the source end ($V_T(y=0) = V_{T}$), then the inversion charge varies as:
    \begin{equation} 
        Q_n(y) = C_{ox} \big(V_G - V_T - V_{ch}(y)\big)
        \label{eq:invcharge}
    \end{equation}
Using this, and the fact that the $\mathcal{E}$-field is the spatial derivative of the channel voltage, we have:
    \begin{equation} 
        I_{DS} = \mu_n\,W\,C_{ox} \big(V_G - V_T - V_{ch}(y) \big) \frac{dV_{ch}}{dy}
        \label{eq:spatial_drain}
    \end{equation}
Let's multiply both sides of \emph{Eq.~\ref{eq:spatial_drain}} by $dy$, and integrate along the channel.  We are converting the integral from position along the channel, to voltage along the channel.  Because the current is uniform along the channel, the expression on the left-hand side must evaluate to $I_{DS} \times L$:
    \begin{equation} 
        \int_0^L I_{DS}\,dy = I_{DS} \times L = \int_0^{V_D} \mu_n\,W\,C_{ox}\big(V_G - V_T - V_{ch}(y)\big)\,dV_{ch} 
    \end{equation}
Resulting in the expression:
    \begin{align} 
        \Aboxed{ I_{DS} = \mu_n C_{ox} \frac{W}{L} \left( V_G - V_T - \frac{V_D}{2} \right) V_D } &\textit{Drain current, triode region}
        \label{eq:ids_triode}
    \end{align}
Interestingly, this is the same equation we derived earlier.  While the result is that same, we have derived it in a way more consistent with the physics without resorting to hand-waving assumptions.  It should be noted that we have ignored one thing in this derivation, which is the variation of the threshold voltage due to the bulk depletion charges.  In \emph{Eq.~\ref{eq:invcharge}}, we assume the inversion charge just varies linearly with the channel voltage. In practice, as the channel voltage increases from the source end, the depletion region width also changes, which means the threshold voltage is different. This is a subtle point that would over complicate the equations without providing more circuit insight or intuition, and it's common to make this simplification for hand calculations.

The triode region current (\emph{Eq.~\ref{eq:ids_triode}}) is plotted in \emph{Fig.~\ref{fig:ids_triode_only}}.  We note that the currents peak when $V_{DS} = V_{GS} - V_T$, and then the equations predict lower and lower currents (inverted parabolas).  However, in the laboratory we do not observe the current decreasing past the saturation point.  This is shown in \emph{Fig.~\ref{fig:ids_family}}, and so there is a fundamental flaw in the derivation that we must address.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=\columnwidth]{ids_triode_only} 
\caption{The calculated family of MOSFET $I$-$V$ curves in the triode region.  The derivation here is only valid in the triode region and cannot predict the current saturation mechanism.}
\label{fig:ids_triode_only}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{1cm}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[H]
\centering
\includegraphics[width=\columnwidth]{ids_idsat_full} 
\caption{The piece-wise calculated MOSFET $I$-$V$ curves are derived by assuming the current in the saturation region is essentially constant and given by the maximum value predicted from the square-law relations.}
\label{fig:ids_family}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=\columnwidth]{mos_current_sat}
\caption{When a MOSFET is biased with $V_{DS} > V_{DS,sat}$, the channel is pinched off at a point inside the channel, but near the drain.  This creates a very small depletion region between the drain diffusion region and the conductive channel.  This region is a high $\mathcal{E}$-field region.}
\label{fig:mos_current_sat}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   SECTION 8.5                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Understanding Current Saturation (Pinch Off)}
The observed experimental behavior of devices beyond a drain voltage of $V_{DS} = V_{GS} - V_T$ is a flattening of the current, rather than decreasing current.  Let's look into this a bit more to understand the origin of this saturation region, shown in \emph{Fig.~\ref{fig:mos_current_sat}}.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.5.1             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The Saturation Region}
From our equations, we have that when $V_{DS} > V_{GS} - V_T$, there is no inversion charge at the drain, so what happens? Intuitively, it seems like the channel from the source to the drain is interrupted, or pinched off, so you might think this would lead to zero current again.  This intuition is so strong that this region is sometimes called the \textbf{"pinch-off"}\index{MOSFET!pinch-off region} region, but the current does not abruptly go to zero as intuition might lead you to believe.  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.5.2             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Pinch Off}
When $V_{DS} > V_{GS}-V_T$, we can say that the excess voltage $V_{DS} - (V_{GS}-V_T)$ is dropped across a small region between the drain and the channel, shown in \emph{Fig.~\ref{fig:mos_current_sat}}.  Let's define the \textbf{saturation drain voltage}\index{MOSFET!saturation voltage}:
    \begin{align}
        \Aboxed{ V_{DS,sat} &= V_{GS} - V_T } &\textit{MOSFET saturation voltage}
        \label{eq:saturation_voltage}
    \end{align}
Any voltage above $V_{DS,sat}$ results in a fixed electric field $\mathcal{E}_{d,sat}$ in the channel, and an excess electric field $\mathcal{E}_d$ near the drain end.  Since this is a small region, even a modest drain voltage above $V_{DS,sat}$ results in a potentially very large electric field $\mathcal{E}_d$.  This large electric field can propel electrons from the channel into the drain end at high velocity.  In this region, increasing the drain voltage does not increase current (appreciably), because the current flow is limited by the supply of electrons from channel side.  The supply of electrons is dictated by $\mathcal{E}_{d,sat}$, set by $V_{DS,sat}$.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=\columnwidth]{waterfall}
\caption{A good analog for a MOSFET biased with $V_{DS} > V_{DS,sat}$ is a water pipe flowing down a hill into a waterfall.  The region where the water flows on the hill has a potential drop of $V_{DS,sat}$ and the remaining potential $V_{DS} - V_{DS,sat}$, is dropped through the waterfall.  The overall current is independent of the waterfall height.}
\label{fig:waterfall}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
A good analogy is to imagine a stream of water gently flowing down an incline and then into a waterfall, as shown in \emph{Fig.~\ref{fig:waterfall}}.  If the slope of the incline is increased, the current flow increases.  But the current flow is independent of the height of the waterfall.  In our system, the waterfall region is the high $\mathcal{E}$-field region.  

In addition, in real transistors current saturation may happen due to another mechanism, namely velocity saturation. If the field strength in the channel exceeds a threshold, the linear relation between drift velocity and electric field ceases to be valid, and the velocity of carriers begins to saturate.  This is shown in \emph{Fig.~\ref{fig:ids_family}}.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.5.3             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Square-Law Current in Saturation}
Taking the previous discussion into account, we can say that the current peaks at maximum value when 
$V_{DS} = V_{GS} - V_{T} = V_{DS,sat}$.  Or in other words:
    \begin{align}
        I_{DS,sat} &= \frac{W}{L}\mu\,C_{ox}\left(V_{GS} - V_T - \frac{V_{DS,sat}}{2}\right)V_{DS,sat}\\[0.25cm]
        &= \frac{W}{L}\mu\,C_{ox}\left(V_{GS} - V_T - \frac{V_{GS} - V_T}{2}\right) \big(V_{GS} - V_T\big)
        \label{eq:ids_saturation_long}
    \end{align}
\vspace{0.25cm}
\emph{Eq.~\ref{eq:ids_saturation_long}} can be simplified by expanding the two terms in parentheses on the RHS:
    \begin{align*}
        \left(V_{GS} - V_T - \frac{V_{GS} - V_T}{2}\right) \big(V_{GS} - V_T\big)
        &= {V_{GS}}^2 - V_{GS}\,V_T - \frac{1}{2}{V_{GS}}^2 + \frac{1}{2}V_{GS}\,V_T - V_{GS}\,V_T\\[0.15cm]
        &\qquad + {V_T}^2 + \frac{1}{2}V_{GS}\,V_T - \frac{1}{2}{V_T}^2\\[0.45cm]
        &=\frac{1}{2}{V_{GS}}^2 + \frac{1}{2}{V_T}^2 - V_{GS}\,V_T\\[0.45cm]
        &=\frac{1}{2}\big( {V_{GS}}^2 - 2V_{GS}\,V_T + {V_T}^2 \big)\\[0.45cm]
        &=\frac{1}{2} {\big(V_{GS} - V_T\big)}^2
    \end{align*}
Finally, we arrive at the following form, which is the \textbf{saturation current}\index{MOSFET!saturation current}:
    \begin{align}
        \Aboxed{ I_{DS,sat} = \left( \frac{W}{2L} \right) \mu\,C_{ox} {\big(V_{GS} - V_T\big)}^2 } &\textit{MOSFET saturation current}
        \label{eq:ids_saturation}
    \end{align}
Notice that in the saturation region, the current is nearly independent of variations in the drain voltage and only depends on the gate voltage.  We can think of the transistor as an ideal \textbf{voltage-controlled current source} (VCCS)\index{Voltage-controlled current source}, with an output current dictated by the control terminal, the gate.  This is the characteristics of an ideal amplifier\index{Amplifier!ideal}.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.5.4             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Actual Saturation Current}
Now we need to do deal with another fact.  The measured values of  $I_{DS}$ increases slightly with increasing $V_{DS}$, in other words the curves are not $100\%$ flat.   The physics is complicated, but a simple way to see this is that the channel is getting shorter as the drain voltage depletes away more electrons from the drain end, resulting in a shorter channel length.  This phenomenon is known as the \textbf{channel length modulation}\index{MOSFET!channel length modulation}.  We can model this with an additional linear term, $\lambda$, that allows the current to increase slightly for larger and larger $V_{DS}$ values:
    \begin{align}
        \Aboxed{ I_{DS,sat} = \left( \frac{W}{2L} \right) \mu\,C_{ox} {\big(V_{GS} - V_T\big)}^2 (1 + \lambda V_{DS}) } &\textit{Saturation current, with CLM}
        \label{eq:drain_current_clm}
    \end{align}
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=\columnwidth]{mos_current_sat_clm}
\caption{Channel Length Modulation (CLM) occurs when the drain voltage is modulated beyond $V_{DS,sat}$.  The extra voltage dropped across the high $\mathcal{E}$-field region causes the effective channel length to shrink by $\Delta L$, which results in an increase in the drain-source current.}
\label{fig:mos_current_sat_clm}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.5.5             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Channel Length Modulation} \label{sec:mos_clm}
To see why the current increases as a result of the channel length modulation, let's go back to when $V_{DS} = V_{GS} - V_T = V_{DS,sat}$.  This is the point in which the channel pinches off near the drain.  With a further increase in $V_{DS}$, we see that the pinch-off point moves toward the source, effectively reducing the channel length from $L$ to $L-\Delta L$, as shown in \emph{Fig.~\ref{fig:mos_current_sat_clm}}.  Since current is inversely proportional to $L$, we have:
    \begin{equation} 
        I_{DS} = \left( \frac{1}{2} \right) \mu_n\,C_{ox} \left( \frac{W}{L - \Delta L} \right) {\left( {V_{GS} - V_T} \right)}^2
    \end{equation}
If this is a \textbf{long-channel MOSFET}\index{MOSFET!long-channel}, then $\Delta L \ll L$, and we can simplify this to:
    \begin{equation} 
        I_{DS} = \left( \frac{1}{2} \right) \mu_n\,C_{ox} \left( \frac{W}{L} \right) {\left( {V_{GS} - V_T} \right)}^2 \left(1 - \frac{\Delta L(V_{DS})}{L} \right)
    \end{equation}
The channel length modulation is the change in $L$ as a function of $V_{DS}$.  To first order:
    \begin{equation} 
        \frac{\Delta L(V_{DS})}{L} = \lambda V_{DS}
    \end{equation}
Thus, we have arrived at the same result as \emph{Eq.~\ref{eq:drain_current_clm}}:
    \begin{equation*} 
        I_{DS} = \left( \frac{1}{2} \right) \mu_n\,C_{ox} \left( \frac{W}{L} \right) {\left( {V_{GS} - V_T} \right)}^2 \left(1 - \lambda V_{DS} \right)
    \end{equation*}
Note that the channel length modulation parameter $\lambda$ has units of inverse volts, $\mathrm{V^{-1}}$.  Sometimes this parameter is called the \textbf{"Early Voltage"}\index{Early voltage}: 
    \begin{align} 
        \Aboxed{ V_A &= \frac{1}{\lambda} } &\textit{Early voltage}
        \label{eq:early_voltage}
    \end{align}
The name "Early" is related to the Early Effect, named after its discoverer James M. Early, first applied to bipolar junction transistors.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.5.6             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Summary: Regions of Operation}
Now we will summarize the various conditions that dictate which region of operation a MOSFET is operating in, and the currents associated with them.
\subsubsection{\textbf{Cut-off region:} $V_{GS} < V_T$}
In cut-off mode the transistor is off, and there is effectively no current that flows\footnote{This is an approximation we will make in this class.  In later courses you will learn about sub-threshold\index{MOSFET!sub-threshold} conduction and leakage in the device.}:
    \begin{equation*}
        \boxed{ I_{DS,off} = 0\mathrm{A} }
    \end{equation*}
\subsubsection{\textbf{Linear region:} $V_{GS} > V_T$,\;$V_{DS} \ll V_{GS} - V_T$}
In this region the device acts like a variable conductor, resulting in:
    \begin{equation*}
        \boxed{ I_{DS,lin} = \left( \frac{W}{L} \right) \mu_n\,C_{ox} \left( V_{GS} - V_T \right)V_{DS} }
    \end{equation*}
\subsubsection{\textbf{Triode region:} $V_{GS} > V_T,\;V_{DS} < V_{GS} - V_T = V_{DS,sat}$}
In the triode region the channel is inverted, and a drain voltage is applied to allow current to flow. However, the drain voltage does not exceed the gate-overdrive voltage, which governs the current by:
    \begin{equation*}
        \boxed{ I_{DS,tri} = \left( \frac{W}{L} \right) \mu_n\,C_{ox} \left( V_{GS} - V_T - \frac{V_{DS}}{2} \right)V_{DS} }
    \end{equation*}
\subsubsection{\textbf{Saturation region:} $V_{GS} > V_T,\;V_{DS} > V_{GS} - V_T = V_{DS,sat}$}
Finally, in saturation the channel is inverted at the source side, but not at the drain side.  In this region the current is nearly constant, and only varies minutely due to the channel length modulation effect described earlier:
    \begin{equation*}
        \boxed{ I_{DS,sat} = \left( \frac{W}{2L} \right) \mu_n\,C_{ox} {\left( V_{GS} - {V_T} \right)}^2 (1 + \lambda V_{DS}) }
    \end{equation*}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   SECTION 8.6                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{The Complementary PMOS Device}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             SUBSECTION 8.6.1             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{PMOS Device}
So far, we have derived all of our equations for an NMOS device.  The PMOS devices work exactly the same way, except that they have an $N$-type body, and a channel that is made of positive charges (holes).  As we noted earlier in \emph{Fig.~\ref{fig:mos_symbols}}, the schematic symbol is also different, with an arrow corresponding to the direction of current flow from the source to the drain.  Notice that holes do flow from the source to drain, so unlike an NMOS device, here the arrow and the flow of carriers is the same.  The complete square law relation is shown in \emph{Fig.~\ref{fig:idspmos}}.  Compared to the NMOS device, everything is upside down. This is only if we insist on keeping the same polarity for voltages and currents.  Let's define the current as $I_{SD}$, not $I_{DS}$.   Also $V_{SG}$ and $V_{SD}$ are positive for \textbf{forward active regions}\index{Forward active region}, so in terms of these variables, the curves look right-side-up as shown in \emph{Fig.~\ref{fig:ids_pmos_negative}}.

To derive the $I$-$V$ relation of a PMOS device without repeating all the steps above, we can simply invert all voltages and currents and arrive at the same equations.  For example, the saturation current is given by:
    \begin{align}
        \Aboxed{ I_{SD,sat} = \left( \frac{W}{2L} \right) \mu\,C_{ox} {\big(V_{SG} - \lvert{V_{T_p}\rvert}\big)}^2 (1 + \lambda V_{SD}) } &\textit{PMOS saturation current}
    \end{align}
Since we inverted all the terms, we take an absolute value of the threshold voltage to make the equations identical with the NMOS case.
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[t]
\centering
\includegraphics[width=\columnwidth]{idspmos}
\caption{PMOS $I$-$V$ curves are inverted compared to the NMOS curves, because the current flows in the opposite direction (holes versus electrons), and the device is biased with a negative gate-to-source voltage in order to form the hole inversion channel.}
\label{fig:idspmos}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{1cm}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 FIGURE                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[H]
\centering
\includegraphics[width=\columnwidth]{ids_pmos_negative}
\caption{PMOS $I$-$V$ curves "right-side-up" by flipping the orientation of the device voltage and currents.}
\label{fig:ids_pmos_negative}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   SECTION 8.7                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Chapter Summary}
In this chapter we ...
